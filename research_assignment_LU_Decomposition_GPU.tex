\documentclass[11pt,twoside,czech,american]{book}

%%% Packages:
%% Necessary packages:
\usepackage[T1]{fontenc}		% Font encoding
\usepackage[utf8]{inputenc}		% Input encoding
\usepackage[a4paper]{geometry}	% Use of the A4 page and setting the margins (the binding will be wider)

%% Other packages:
% Code:
\usepackage{listings} 			 % Code formatting package

% Fonts:
\usepackage[hidelinks]{hyperref} % Hide square around URL link.
\usepackage{amsmath}  			 % Advanced mathematic package
\usepackage{xcolor}    			 % Colorful text
\usepackage{soul}				 % Text fonts syllable by syllable - used for in-text codifying
\usepackage[varg]{txfonts}		 % Times New Roman fonts and math alphabets, for example, provides \mathbb{}.

% Graphics:
\usepackage{graphicx} 			 % Insert raster graphic files (PNG etc.)
\usepackage{epsfig} 			 % Insert EPS graphics files
\usepackage{float} 			  	 % Advanced figure placement options
\usepackage{caption} 			 % Captions of figures, tables, etc.
\usepackage{subcaption}			 % Sub-captions of figures, tables, etc. 
\usepackage{tikz}				 % Visual representation of matrices, graphs etc.
\usetikzlibrary{plotmarks, positioning}
\usepackage{pgfplots} 			% For visualizations, graphics, etc.
\pgfplotsset{compat=1.3}		% Use pgfplots version 1.3 specifically

% Languages:
\usepackage{babel}

% Page formatting:
% TODO: Replace placeholder PDF with scan of orignal task paper
\usepackage{pdfpages}			 % Add PDFs into compiled PDF

% Tables:
\usepackage{tabularx}			 % Advanced table options
\usepackage{colortbl} 			 % Table cell color

%%% Document settings:
% TODO: Play around with the following if the formatting of pages turns out weird
\widowpenalty=9500 	   % Completely avoid widows (last lines of paragraph on a new page)
\clubpenalty=9500 	   % Completely avoid orphans (first lines of a new paragraph on the bottom of a page)
\brokenpenalty=9500    % Prohibit page breaks after a line that has a split word at the end

\geometry{verbose,tmargin=4cm,bmargin=3cm,lmargin=3cm,rmargin=2cm,headheight=0.8cm,headsep=1cm,footskip=0.5cm} % Setup from bachelor thesis - provides more space for the content on a page
\raggedbottom 		   % All pages the height of the text on that page. No extra vertical space is added.
\pagenumbering{arabic} % Page numbering in Arabic numerals
\pagestyle{plain}      % Page numbering at the bottom center

\parindent=0pt 		   % Indentation of the 1st line of the paragraph


%%% Custom colors:
\definecolor{nvidia}{rgb}{0.6, 0.73, 0.35}		% Nvidia color
\definecolor{lightnvidia}{rgb}{0.92, 1.0, 0.85} % Nvidia light color
\definecolor{light-gray}{gray}{0.95}			% In-text code highlighting color
\definecolor{lbcolor}{rgb}{0.9,0.9,0.9}			% Code block background color
\definecolor{Darkgreen}{rgb}{0.0, 0.2, 0.13}	% Code block comments color


%%% Custom code block:
\lstset{
	backgroundcolor=\color{lbcolor}, % Background color of the code block
	upquote=true,					 % Format of quote: true -> '', false -> ‘’
	columns=fixed,					 % Characters are below each other (each column is one character -> fixed column size)
	extendedchars=false,			 % Allow national characters, for example, Czech diacritics. If true, then load any package that defines the characters, for example, fontenc, or inputenc, etc.
	showtabs=false,					 % Tabulators visible or not
	showspaces=false,				 % All blank spaces visible as _ or not
	showstringspaces=false,			 % Blank spaces in strings visible as _ or not 
	identifierstyle=\ttfamily,		 % Code font to be monospace if the line begins with one of the following: a-z, A-Z, @, $ and _
	language=C++,					 % Default language syntax highlighting for code blocks
	captionpos=b,					 % Position of the caption. b - bottom; t - top of the listing
	tabsize=2,						 % Set tabulator stops			
	frame=lines,					 % Draw a line on the top and bottom of the code listing -> frame
	numbers=left,					 % Print line numbers on the left of the code block
	numberstyle=\tiny,				 % Font and size of line numbers
	numbersep=5pt,					 % Distance between line numbers and the code block
	basicstyle=\footnotesize,		 % Basic font. Selected at the beginning of each listing
	keywordstyle=\color[rgb]{0,0,1}, % Fond of language keywords in a specific font
	commentstyle=\color{Darkgreen},	 % Font of comments in code block
	stringstyle=\color{red},		 % Font of non-keywords, comments and strings
	breaklines=true,				 % Breaking of long lines
	prebreak = \raisebox{0ex}[0ex][0ex]{\ensuremath{\hookleftarrow}}, % Line-break symbol if a line of code is too long
}
% Extend C++ with CUDA keywords - not supported in lstlisting by default.
\lstset{
	morekeywords={__global__},
	morekeywords={__device__},
	morekeywords={blockDim.x},
	morekeywords={blockDim.y},
	morekeywords={blockIdx.x},
	morekeywords={blockIdx.y},	
	morekeywords={threadIdx.x},
	morekeywords={threadIdx.y},
	morekeywords={gridDim.x},
	morekeywords={__shared__},
	morekeywords={dim3},
	alsoletter={.}				% Make the font be applied for dots
}


%%% Custom commands:
\newcommand{\ti}{\textit} 								  % Shortcut for cursive font
\newcommand{\tb}{\textbf} 								  % Shortcut for bold fond
%\newcommand{\code}[1]{%									  % Shortcut for code font in text
%	\begingroup
%	\sethlcolor{light-gray}%
%	\hl{\texttt{#1}}%
%	\endgroup
%}

\newcommand{\code}[1]{\colorbox{light-gray}{\texttt{#1}}}

%% Status of writing:
\newcommand{\TODO}{\textcolor{red}{TODO}}   		   % To Do command
\newcommand{\ENGLISH}{\textcolor{green}{ENGLISH}}      % Writing To Be Checked by someone who knows English grammar
\newcommand{\TO}{\textcolor{nvidia}{TO}} 				   % Writing To Be Checked by Supervisor (Tomas Oberhuber)


%%% Constants
\newcommand{\cvut}{České vysoké učení technické v Praze}
\newcommand{\fjfi}{Fakulta jaderná a fyzikálně inženýrská}
\newcommand{\ksi}{Katedra softwarového inženýrství}
\newcommand{\programme}{Aplikace přírodních věd}
\newcommand{\specialization}{Aplikace softwarového inženýrství}

\newcommand{\kind}{Výzkumný úkol}

\newcommand{\logoCVUT}{\includegraphics{images/title/cvut_logo_contour_version.pdf}}

% The following was filled in accordance with the original task paper
\newcommand{\titleCZ}{Paralelní LU rozklad pro GPU}			 % Czech title of the project
\newcommand{\titleEN}{Parallel LU Decomposition for the GPU} % English title of the project
\newcommand{\paperAuthor}{Bc. Lukáš Čejka}   				 % Name and surname, including academic titles
\newcommand{\supervisor}{doc. Ing. Tomáš Oberhuber, Ph.D.} 	 % Name and surname of supervisor, including academic titles
\newcommand{\supervisorWorkspace}{\ksi, \fjfi, \cvut} 			 % Workplace of supervisor

% TODO: Can Klinkovsky be considered a consultant?
\newcommand{\consultant}{--} 								 % Consultant's name, surname and academic titles, if I have a consultant
\newcommand{\consultantWorkspace}{--} 							 % Consultant's workplace, if I have a consultant

\newcommand{\yearSubmitted}{2022}  									 % Year of handing in the thesis (not the academic years)
\newcommand{\place}{Praze} 									 % City of studying

% TODO: Fill in the following at the end
\newcommand{\keywordCZ}{Klíčová slova}   						 % Enter 5 keywords max. in Czech
\newcommand{\keywordEN}{Key words}       						 % Enter 5 keywords max. in English (translations of the Czech keywords)
\newcommand{\abstractCZ}{Popis práce česky}    				 % Abstract in Czech (roughly 7 sentences, at least 80 words)
\newcommand{\abstractEN}{Description of the project in English} % Abstract in English (translation of the Czech abstract)

% Declaration in Czech
\newcommand{\declarationCZ}{Prohlašuji, že jsem svůj výzkumný úkol vypracoval samostatně a použil jsem pouze podklady (literaturu, projekty, SW atd.) uvedené v přiloženém seznamu.}

% Declaration in English
\newcommand{\declarationEN}{I declare that I have carried out my research project independently and I have used only the materials (literature, projects, software, etc.) listed in the bibliography.}

% Acknowledgement in Czech
\newcommand{\acknowledgementCZ}{Chtěl bych poděkovat doc. Ing. Tomáš Oberhuber, Ph.D. za vedení mé práce a za podnětné návrhy, které ji obohatily.}

% Acknowledgement in English (translation of the Czech acknowledgement)
\newcommand{\acknowledgementEN}{I would like to thank doc. Ing. Tomas Oberhuber, Ph.D. for supervising my project and for the inspiring proposals that enriched it.}




\begin{document}
\shorthandoff{-} % This disables the issues with the 'czech' package: https://tex.stackexchange.com/questions/477449/incomplete-iffalse-related-listlisting-textit-and-textcolor




%%%%%%%%%%%% TITLE PAGE %%%%%%%%%%%%
\thispagestyle{empty}
\selectlanguage{czech}%

\begin{center}
	{\LARGE
		\cvut\par
		\fjfi
	}
    \vspace{10mm}

    \begin{tabular}{c}
		\tb{\ksi} \\[3pt]   
		\tb{Obor: \specialization}\\
    \end{tabular}

   \vspace{10mm} \logoCVUT \vspace{15mm} 

   {\huge \tb{\titleCZ}\par}
   \vspace{5mm}
   \selectlanguage{american}%
   {\huge \tb{\titleEN}\par}
   \selectlanguage{czech}%
   
   \vspace{15mm}
   {\Large \MakeUppercase{\kind}}

   \vfill
   {\large
    \begin{tabular}{ll}
    Vypracoval: & \paperAuthor\\
    Vedoucí práce: & \supervisor\\
    Rok: & \yearSubmitted
    \end{tabular}
   }
\end{center}

\clearpage{\pagestyle{empty}\cleardoublepage} % prázdná stránka za tou "titulní", bez čísla




%%%%%%%%%%%% TASK PAPER %%%%%%%%%%%%
% TODO: Include the orginal scanned paper - signed by my supervisor and the department head
% TODO: Before binding, one of the printed copies of this paper should CONTAIN THE ORIGINAL SIGNED PAPER
\newpage  			  % DO NOT TOUCH!
\thispagestyle{empty} % DO NOT TOUCH!

% Task paper scanned as a 2-page PDF:
\includepdf[pages={1,2}]{resources/zadani_cele.pdf} % TODO: Replace with the correct paper




%%%%%%%%%%%% DECLARATION %%%%%%%%%%%%
\newpage 			  % DO NOT TOUCH!
\thispagestyle{empty} % DO NOT TOUCH!

~ 					  % DO NOT TOUCH!
\vfill 				  % Empty fill. DO NOT TOUCH!

\tb{Prohlášení} 	  % DO NOT TOUCH!

\vspace{1em} 		  % Vertical space. % DO NOT TOUCH!
\declarationCZ

\selectlanguage{american}%
\vspace{1em}
\tb{Declaration}

\vspace{1em}
\declarationEN
\selectlanguage{czech}%

\vspace{2em}  									 							  % DO NOT TOUCH!
\hspace{-0.5em}\begin{tabularx}{\textwidth}{X c} 							  % DO NOT TOUCH!
V \place\ dne .................... &........................................ \\ % DO NOT TOUCH!
	& \paperAuthor
\end{tabularx} % DO NOT TOUCH!




%%%%%%%%%%%% ACKNOWLEDGEMENT  %%%%%%%%%%%%
\newpage
\thispagestyle{empty}

~
\vfill % Empty fill

\tb{Poděkování}

\vspace{1em} % Vertical space. % DO NOT TOUCH!
\acknowledgementCZ

\selectlanguage{american}%
\vspace{1em}
\tb{Acknowledgment}

\selectlanguage{czech}%
\vspace{1em} % Vertical space. % DO NOT TOUCH!
\acknowledgementEN
\begin{flushright}
\paperAuthor
\end{flushright}  % Acknowledgement page ends here




%%%%%%%%%%%% ABSTRACT %%%%%%%%%%%% 
\newpage   			  % DO NOT TOUCH!
\thispagestyle{empty} % DO NOT TOUCH!

% Preparation: DO NOT TOUCH the next 8 lines!
\newbox\odstavecbox
\newlength\vyskaodstavce
\newcommand\odstavec[2]{%
    \setbox\odstavecbox=\hbox{%
         \parbox[t]{#1}{#2\vrule width 0pt depth 4pt}}%
    \global\vyskaodstavce=\dp\odstavecbox
    \box\odstavecbox}
\newcommand{\delka}{120mm} % Text width in 2nd table column

% Using the preparation: DO NOT TOUCH commands inside the "tabular" section!
\begin{tabular}{ll}
  {\em Název práce:} & ~ \\
  \multicolumn{2}{l}{\odstavec{\textwidth}{\bf \titleCZ}} \\[1em]
  {\em Autor:} & \paperAuthor \\[1em]
  {\em Studijní program:} & \programme \\
  {\em Obor:} & \specialization \\
  {\em Druh práce:} & \kind \\[1em]
  {\em Vedoucí práce:} & \odstavec{\delka}{\supervisor\\ \supervisorWorkspace} \\
  {\em Konzultant:} & -- %\odstavec{\delka}{\consultant \\ \consultantWorkspace}  % TODO: Remove the text "-- %" if you had a consultant
 \\[1em]  
  \multicolumn{2}{l}{\odstavec{\textwidth}{{\em Abstrakt:} ~ \abstractCZ  }} \\[1em]
  {\em Klíčová slova:} & \odstavec{\delka}{\keywordCZ} \\[2em]
  \selectlanguage{american}%
  {\em Title:} & ~\\
  \multicolumn{2}{l}{\odstavec{\textwidth}{\bf \titleEN}}\\[1em]
  {\em Author:} & \paperAuthor \\[1em]
  \multicolumn{2}{l}{\odstavec{\textwidth}{{\em Abstract:} ~ \abstractEN  }} \\[1em]
  {\em Key words:} & \odstavec{\delka}{\keywordEN}
\end{tabular}




%%%%%%%%%%%% CONTENTS OF THE PAPER %%%%%%%%%%%%
\selectlanguage{american}%
\newpage  		 % DO NOT TOUCH!
\parskip=0pt
\tableofcontents % DO NOT TOUCH!
\parskip=7pt
\newpage 		 % DO NOT TOUCH!




%--------------------------------------------------------
%|         The PAPER ITSELF begins here                 |
%--------------------------------------------------------

\include{preface}

\include{ch1_theory}
\include{ch2_implementation}
\include{ch3_benchmark-results}

\include{conclusion}

\include{bibliography}

\include{attachments}

\end{document}
